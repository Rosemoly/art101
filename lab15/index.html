<!DOCTYPE html>
<html>
<head>
	<title>Lab 15</title>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	
	<link rel="stylesheet" type="text/css" href="../css/site.css">
	<link rel="stylesheet" type="text/css" href="css/lab.css">
	
	<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
	<script type="text/javascript" src="./js/lab.js" defer></script>


</head>
<body>
	<main id="content">
		<section>
			<h1>Lab 15: AJAX</h1>
			<div class="minor-section" id="challenge">
				<h2>Challenge</h2>
				<p>Testing API and using AJAX.</p>
			  </div>
			  
			  <div class="minor-section" id="problems">
				<h2>Problems</h2>
				<p>I was confused in task 2 for how I would go about testing API but I just used my Javascript.</p> 
			  </div>

			  <div class="minor-section">
				<h2>Reflection</h2>
				<p>I understood the assignment well and put my best energy into finishing it.</p>
			  </div>

			  <div class="minor-section" id="results">
				<h2>Results</h2>
				<p>You can check out the results for yourself here:</p>
			  </div>

			  <div id="output"></div>
			  <button id="activate">Activate</button>
		
			  <script>
				// Add a click event to the button
				$("#activate").click(function () {
			
				  // When a user clicks the button, use a jQuery AJAX call to fetch output from the API
				  $.ajax({
					// The URL for the request (from the API docs)
					url: "https://yesno.wtf/api",
					// The data to send (none needed for this API)
					data: {},
					// Whether this is a POST or GET request
					type: "GET",
					// The type of data we expect back
					dataType: "json",
					// What do we do when the API call is successful
					success: function(data) {
					  // Option 1: parse the JSON data
					  let answer = data.answer;
					  let gif = data.image;
			
					  // Display the answer and the gif in the output div
					  $("#output").html(`<p>The universe says: <strong>${answer.toUpperCase()}</strong></p>
										 <img src="${gif}" alt="answer gif">`);
					},
					// What we do if the API call fails
					error: function (jqXHR, textStatus, errorThrown) { 
					  $("#output").text("Something went wrong: " + textStatus);
					  console.log("Error:", textStatus, errorThrown);
					}
				  });
			
				});
			  </script>
</section>

		<nav id="links">
			<img src="img/" alt="Screenshot" width="300">
		</nav>
	</main>
</body>
</html>
